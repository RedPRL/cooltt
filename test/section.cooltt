section sec1 begin
  def x : nat := 10
  lens [ ?lens ]
  repack [ ?repack ]
end [x -> z]

lens [ ?lens ]
repack [ ?repack ]

#normalize sec1::z

def y : nat := 20

!section a begin
  def x : nat := 30
  section b begin
    def x : nat := 40

    lens [ ?lens ]
    repack [ ?repack ]

    export {y, [y; y -> y2]}

    lens [ ?lens ]
    repack [ ?repack ]

    repack [ x -> x :: x ]

    lens [ ?lens ]
    repack [ ?repack ]
  end [ ! y ]
end

#normalize a::x
#normalize a::b::y2

lens [ ?lens ]
repack [ ?repack ]
